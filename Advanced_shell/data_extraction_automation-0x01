#!/bin/bash
# Extract PokÃ©mon name, type, height and weight from data.json
# Uses: jq, awk, sed

# fail if data.json missingu
if [ ! -f data.json ]; then
  echo "data.json not found" >&2
  exit 1
fi

# read raw values, trim with sed (safety), capitalize with awk
name=$(jq -r '.name' data.json | sed 's/^[[:space:]]*//;s/[[:space:]]*$//')
name_cap=$(echo "$name" | awk '{print toupper(substr($0,1,1)) substr($0,2)}')

type=$(jq -r '.types[0].type.name' data.json | sed 's/^[[:space:]]*//;s/[[:space:]]*$//')
type_cap=$(echo "$type" | awk '{print toupper(substr($0,1,1)) substr($0,2)}')

height=$(jq -r '.height' data.json)
weight=$(jq -r '.weight' data.json)

# convert units: height decimeters -> meters (1 dm = 0.1 m)
height_m=$(awk -v h="$height" 'BEGIN{printf "%.1f", h/10}')
# weight hectograms -> kg (1 hg = 0.1 kg)
weight_kg=$(awk -v w="$weight" 'BEGIN{printf "%.0f", w/10}')

# final output
echo "${name_cap} is of type ${type_cap}, weighs ${weight_kg}kg, and is ${height_m}m tall."
